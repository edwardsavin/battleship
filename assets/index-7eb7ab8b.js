(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(o){if(o.ep)return;o.ep=!0;const t=r(o);fetch(o.href,t)}})();function q(){const e=document.createElement("footer");e.classList.add("footer");const n=document.createElement("div");n.classList.add("footer-wrapper");const r=document.createElement("p");r.innerHTML=`Copyright 춸 ${new Date().getFullYear()}`;const a=document.createElement("a");return a.classList.add("footer-link"),a.href="https://edwardcs.com",a.target="_blank",a.textContent="Edward Savin",n.appendChild(r),n.appendChild(a),e.appendChild(n),e}function O(e,n,r){for(let a=0;a<e;a+=1)for(let o=0;o<n;o+=1){const t=document.createElement("div");t.classList.add("board__cell"),t.setAttribute("data-x",`${a}`),t.setAttribute("data-y",`${o}`),r.appendChild(t)}}function E(e,n){const r=e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-"),a=document.createElement("div");return a.classList.add(`board-${r}`),O(10,10,a),n&&n.forEach(o=>{o.coordinates.forEach(t=>{const i=a.querySelector(`[data-x="${t[0]}"][data-y="${t[1]}"]`);i&&!o.isComputer&&(i.classList.add("ship"),i.setAttribute("data-ship",`${o.name}`))})}),a}function $(){return document.querySelector(".main__content-wrapper")}function P(e){const n=document.createElement("div");n.classList.add("player__title-container");const r=document.createElement("h2");return r.classList.add("player__title"),r.textContent=`${e}'s Board`,n.appendChild(r),n}function G(e,n,r){const a=document.querySelector(".main__container");a.style.justifyContent="center";const o=document.querySelector(".main__container-title");o.style.marginBottom="0";const t=document.querySelector(".content-wrapper__game-container");t==null||t.remove();const i=document.createElement("div");i.classList.add("game-over-container");const s=document.createElement("h1");s.classList.add("game-over"),s.textContent=`${e.name} wins!`,i.appendChild(s);const c=document.createElement("button");c.classList.add("play-again"),c.textContent="Play Again",i.appendChild(c),r==null||r.appendChild(i),c.addEventListener("click",()=>{s.remove(),c.remove(),"isComputer"in e?L(n.name):L(e.name)})}function M(e,n,r,a){const o=a.name.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-"),t=document.querySelector(`.board-${o} [data-x="${e}"][data-y="${n}"]`);if(t&&(a.gameboard.board[e][n]==="miss"?t.classList.add("miss"):a.gameboard.board[e][n]==="hit"&&t.classList.add("hit")),a.gameboard.checkIfAllShipsSunk()){G(r,a,$());return}if("isComputer"in a){const i=a.smartAttack(r),[s,c]=i;M(s,c,a,r)}}function T(e){const n=e.player.name,r=e.computer.name,a=n.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-"),o=$(),t=document.createElement("div");t.classList.add("content-wrapper__game-container");const i=document.createElement("div");i.classList.add(`player-wrapper-${a}`);const s=P(n),c=E(n,e.playerShips);c.classList.remove("board-temp"),i.appendChild(s),i.appendChild(c);const d=document.createElement("div");d.classList.add(`player-wrapper-${r}`);const l=P(r),h=E(r,e.computerShips);return d.appendChild(l),d.appendChild(h),t.appendChild(i),t.appendChild(d),o==null||o.appendChild(t),h.querySelectorAll(".board__cell").forEach(p=>{p.addEventListener("click",g=>{const u=Number(g.target.dataset.x),m=Number(g.target.dataset.y);e.player.attack(u,m,e.computer),M(u,m,e.player,e.computer)})}),t}function V(){const e=Array.from({length:10},()=>Array.from({length:10},()=>null));function n(c,d){return e[c][d]!==null}function r(c,d){e[c][d]="hit"}function a(c,d){e[c][d]="miss"}function o(c,d){return e[c][d]==="hit"}function t(c,d,l,h){if(n(d,l))throw new Error("Ship already placed at coordinates");if(h)for(let p=0;p<c.length;p+=1)e[d][l+p]=c,c.changeCoordinates(d,l+p);else if(!h)for(let p=0;p<c.length;p+=1)e[d+p][l]=c,c.changeCoordinates(d+p,l)}function i(c,d){if(o(c,d))return;if(!n(c,d)){a(c,d);return}const l=e[c][d];l&&typeof l!="string"&&(l.hit(),r(c,d))}function s(){return e.every(c=>c.every(d=>d&&typeof d!="string"?d.isSunk():!0))}return{board:e,placeShip:t,receiveAttack:i,checkIfAllShipsSunk:s,isShipPlaced:n}}function b(e,n){let r=0;const a=[];function o(){return r===e}function t(){if(o())throw new Error("Ship is sunk");r+=1}function i(){return r}function s(c,d){a.push([c,d])}return{length:e,name:n,isSunk:o,hit:t,getHits:i,changeCoordinates:s,coordinates:a}}function N(e){const n=V(),r=[b(5,"Carrier"),b(4,"Battleship"),b(3,"Destroyer"),b(3,"Submarine"),b(2,"Patrol Boat")];function a(t,i,s,c){n.placeShip(t,i,s,c)}function o(t,i,s){if(s.gameboard.board[t][i]==="miss"||s.gameboard.board[t][i]==="hit")throw new Error("You have already attacked this coordinate");s.gameboard.receiveAttack(t,i)}return{name:e,gameboard:n,ships:r,placeShip:a,attack:o}}function j(e,n,r,a,o){const t=[];if(a+n<=o){let i=!0;for(let s=0;s<n;s+=1)if(e.gameboard.board[r][a+s]!==null){i=!1;break}i&&t.push([r,a,!0])}return t}function H(e,n,r,a,o){const t=[];if(r+n<=o){let i=!0;for(let s=0;s<n;s+=1)if(e.gameboard.board[r+s][a]!==null){i=!1;break}i&&t.push([r,a,!1])}return t}function D(e,n,r){const a=[];for(let o=0;o<r;o+=1)for(let t=0;t<r;t+=1)a.push(...j(e,n,o,t,r),...H(e,n,o,t,r));return a}function k(e,n){const r=[];return e-1>=0&&r.push([e-1,n]),e+1<10&&r.push([e+1,n]),n-1>=0&&r.push([e,n-1]),n+1<10&&r.push([e,n+1]),r}function I(){const e=N("Computer");function n(){e.ships.forEach(t=>{const i=D(e,t.length,10),[s,c,d]=i[Math.floor(Math.random()*i.length)];e.placeShip(t,s,c,d)})}function r(t){let i=Math.floor(Math.random()*10),s=Math.floor(Math.random()*10);for(;t.gameboard.board[i][s]==="miss"||t.gameboard.board[i][s]==="hit";)i=Math.floor(Math.random()*10),s=Math.floor(Math.random()*10);return e.attack(i,s,t),[i,s]}let a=[];function o(t){if(a.length===0){const[d,l]=r(t);return t.gameboard.board[d][l]==="hit"&&(a=k(d,l)),[d,l]}let i=a.pop();for(;i&&(t.gameboard.board[i[0]][i[1]]==="miss"||t.gameboard.board[i[0]][i[1]]==="hit");){if(a.length===0)return o(t);i=a.pop()}if(!i)return o(t);const[s,c]=i;return e.attack(s,c,t),t.gameboard.board[s][c]==="hit"&&a.push(...k(s,c)),[s,c]}return{...e,placeShips:n,smartAttack:o,isComputer:!0}}function A(e,n=!1){const{ships:r}=e;return r.map(o=>({isComputer:n,name:o.name,coordinates:o.coordinates}))}function F(e){const n=N(e),r=I();r.placeShips();const a=A(n),o=A(r,!0);return{player:n,computer:r,playerShips:a,computerShips:o}}function Y(){const e=document.querySelector(".content-wrapper__new-game-container");e==null||e.remove()}function B(e,n,r,a){return a?n+r>10:e+r>10}function x(e){return e.classList.contains("ship")}function K(e){return e.dataset.validPlacement==="true"}function S(e,n,r,a,o){return a?o.querySelector(`[data-x="${e}"][data-y="${n+r}"]`):o.querySelector(`[data-x="${e+r}"][data-y="${n}"]`)}function W(e,n,r,a,o){for(let t=0;t<o.length;t+=1){const i=S(e,n,t,r,a);i&&(i.dataset.hoverShip=o.name)}}function X(e,n,r,a,o,t){t.addEventListener("mouseleave",()=>{for(let i=0;i<o.length;i+=1){const s=S(e,n,i,r,a);s&&delete s.dataset.hoverShip}})}function J(e,n,r,a,o,t){const i=a;if(B(o,t,n.length,r)){i.dataset.validPlacement="false";return}for(let s=0;s<n.length;s+=1){const c=S(o,t,s,r,e);if(c&&x(c)){i.dataset.validPlacement="false";return}}W(o,t,r,e,n),X(o,t,r,e,n,i),i.dataset.validPlacement="true"}function L(e){Y();const n=document.querySelector(".main__container");n.style.justifyContent="flex-start";const r=document.querySelector(".main__content-wrapper"),a=document.createElement("div");a.classList.add("content-wrapper__temp-board-container");const o=document.createElement("h2");o.classList.add("temp-board__title");let t=!0;const i=document.createElement("button");i.classList.add("temp-board__rotate-button"),i.textContent="Vertical 游대",t?i.textContent="Horizontal 游대":i.textContent="Vertical 游대";const s=E(e);s.classList.add("board-temp"),a.appendChild(o),a.appendChild(i),a.appendChild(s),r==null||r.appendChild(a);const c=F(e);let d=c.player.ships[0];o.textContent=`Place your ${d.name}`,i.addEventListener("click",()=>{t=!t,t?i.textContent="Horizontal 游대":i.textContent="Vertical 游대"});function l(g){const u=g.target,m=Number(u.dataset.x),v=Number(u.dataset.y);J(s,d,t,u,m,v)}function h(g){const u=g.target;delete u.dataset.validPlacement}function p(g){const u=g.target,m=Number(u.dataset.x),v=Number(u.dataset.y),f=document.createElement("p");f.classList.add("temp-board__error"),f.setAttribute("role","alert");const _=document.querySelector(".temp-board__error");if(_&&_.remove(),B(m,v,d.length,t)){f.textContent="Ship is out of bounds.",a.insertBefore(f,s),delete u.dataset.validPlacement;return}if(x(u)){f.textContent="This cell is already occupied by a ship.",a.insertBefore(f,s),delete u.dataset.validPlacement;return}if(!K(u)){f.textContent="Cannot place ship on top of another ship.",a.insertBefore(f,s),delete u.dataset.validPlacement;return}try{c.player.placeShip(d,m,v,t)}catch(C){C instanceof Error&&(f.textContent=C.message);return}u.classList.add("ship"),u.dataset.ship=d.name,u.dataset.shipPart="0";for(let C=1;C<d.length;C+=1){const y=s.querySelector(`[data-x="${t?m:m+C}"][data-y="${t?v+C:v}"]`);y.classList.add("ship"),y.dataset.ship=d.name,y.dataset.shipPart=`${C}`}const w=c.player.ships.indexOf(d)+1;w<c.player.ships.length?(d=c.player.ships[w],o.textContent=`Place your ${d.name}`):(a.remove(),s.removeEventListener("mouseover",l),s.removeEventListener("touchstart",l),s.removeEventListener("mouseout",h),s.removeEventListener("click",p),T(c))}return s.addEventListener("mouseover",l),s.addEventListener("touchstart",l),s.addEventListener("mouseout",h),s.addEventListener("click",p),a}function Q(){const e=document.createElement("div");e.classList.add("content-wrapper__new-game-container");const n=document.createElement("input");n.classList.add("new-game__input-player-name"),n.setAttribute("type","text"),n.setAttribute("placeholder","Enter your name"),n.setAttribute("maxlength","12");const r=document.createElement("button");r.classList.add("new-game__button-start-game"),r.textContent="Start";function a(){if(n.value===""){const t=document.createElement("p");t.classList.add("new-game__error"),t.setAttribute("role","alert"),t.textContent="The name is required.",e.insertBefore(t,n);return}const o=n.value.trim();L(o)}return n.addEventListener("keyup",o=>{o.key==="Enter"&&a()}),r.addEventListener("click",a),e.appendChild(n),e.appendChild(r),e}function R(){const e=document.querySelector("#main"),n=document.createElement("div");n.classList.add("main__container"),n.style.justifyContent="center";const r=document.createElement("div");r.classList.add("main__content-wrapper");const a=document.createElement("h1");a.classList.add("main__container-title"),a.textContent="Battleship 44";const o=Q();r.appendChild(o);const t=q();n.appendChild(a),n.appendChild(r),e==null||e.appendChild(n),e==null||e.appendChild(t)}R();
